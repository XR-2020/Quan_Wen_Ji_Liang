<!--全数据+分页+动态条件查询+高亮显示-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <link rel="icon" href="titleLogo.PNG" sizes="32x32">
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
    <script src="jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="mycss.css">
</head>
<body>
<div class="container-fluid">
    <div class="container">
        <br><br>
        <div class="row">
            <div class="col-sm-2" style=" padding: 0px">
                <img src="logo.PNG" style="height: 33px;width: 110px;margin: auto" class="img-responsive"></div>
            <div class="col-sm-10">
                <div  class="col-sm-10" style=" padding: 0px"><input id="div1" placeholder="输入搜索内容......"/></div>
                <div  class="col-sm-2" style=" padding: 0px">
                    <button type="button" id="search_Button" class="btn btn-info" style="height: 36px;width: 112px;border-radius:0px 10px 10px 0px;">
                        <span class="buttonText">搜索</span>
                    </button>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-sm-10">
                <form class="bs-example bs-example-form" role="form">
                    <div class="row">
                        <div class="col-sm-8">
                            <div class="input-group" id="list">
                                <div class="input-group-btn">
                                    <button type="button" style="background-color: #c4c7ce" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                        <span class="buttonText" id="detail">查询条件</span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <p onmouseover="this.className='onover'" onmouseout="this.className='outover'" onclick="changes($(this).text())">论文</p>
                                        </li>
                                        <li>
                                            <p  onmouseover="this.className='onover'" onmouseout="this.className='outover'" onclick="changes($(this).text())">词语</p>
                                        </li>
                                        <li>
                                            <p onmouseover="this.className='onover'" onmouseout="this.className='outover'" onclick="changes($(this).text())">作者</p>
                                        </li>
                                    </ul>
                                </div><!-- /btn-group -->
                                <input type="text" id="div2" class="form-control" style="width: 100%">
                                <span class="input-group-btn">
                                         <button class="btn btn-default" type="button" id="detailSearch_button">Go</button>
                                    </span>
                            </div><!-- /input-group -->
                        </div><!-- /.col-lg-6 -->
                    </div>
                </form>
            </div>
        </div>
        <div class="row" id="context">
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div id="page"></div>
            </div>
        </div>
        <br>
    </div>
    <img src="end.PNG" width="100%" height="109" style="margin: auto;position: relative">
</div>



</body>
<script type="text/javascript">
    //处理高亮显示,没有搜索时会重新刷新页面
    const contexts = document.getElementById("context");//按照id名字获取到DOM
    const searchText=document.getElementById("div1");
    const buttonHandle=document.getElementById("search_Button");
    buttonHandle.onclick=function gaoliang() {
        const val=searchText.value;
        if(val){
           let findContexts=$('#context').html().split(val);
           contexts.innerHTML=findContexts.join('<span style="color: red">'+val+'</span>');//高亮显示为红色
        }else{
            window.location.reload();
        }
    }

    //处理分页
   var pageData=[
       {
           title:"标题啊啵踩顶呃1",//字符串
           author:[{
               name:"A1",
               organization:"AO1",
           },{
               name:"A2",
               organization:"AO2",
           }],//字符串数组
           FirstTitle:[{
               f_title:"AF1",
               f_context:"AF111111111111111111111",
           },{
               f_title:"AF2",
               f_context:"AF222222222222222222222",
           }],//字符串数组
           otherTitle:[{
               o_title:"AO1",
               o_context:"AO111111111111111111111",
           },{
               o_title:"AO2",
               o_context:"AO22222222222222222222222",
           }],//字符串数组
           documents:["a1a1a1a1a1a1a1","aaaaaaaaaaaaa2"],
           href:"https://fanyi.baidu.com/?aldtype=16047#auto/zh",
           address:"http://www.zuowen.com/e/20190903/5d6de02877f8f.shtml"
       },
       {
           title:"标题啊啵踩顶呃2",
           author:[{
               name:"B1",
               organization:"BO1",
           },{
               name:"B2",
               organization:"BO2",
           }],//字符串数组
           FirstTitle:[{
               f_title:"BF1",
               f_context:"BF111111111111111111111",
           },{
               f_title:"BF2",
               f_context:"BF222222222222222222222",
           }],//字符串数组
           otherTitle:[{
               o_title:"BO1",
               o_context:"BO111111111111111111111",
           },{
               o_title:"BO2",
               o_context:"BO22222222222222222222222",
           }],//字符串数组
           documents: ["b1b1b1b1b1b1b1","bbbbbbbbbbbbbbbbb2"],
           href:"https://baike.baidu.com/item/%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91/10607809?fr=aladdin",
           address:"http://www.zuowen.com/e/20190903/5d6de02877f8f.shtml"
       },
       {

           title:"标题啊啵踩顶呃3",
           author:[{
               name:"C1",
               organization:"CO1",
           },{
               name:"C2",
               organization:"CO2",
           }],//字符串数组
           FirstTitle:[{
               f_title:"CF1",
               f_context:"CF111111111111111111111",
           },{
               f_title:"CF2",
               f_context:"CF222222222222222222222",
           }],//字符串数组
           otherTitle:[{
               o_title:"CO1",
               o_context:"CO111111111111111111111",
           },{
               o_title:"CO2",
               o_context:"CO22222222222222222222222",
           }],//字符串数组
           documents: ["c1c1c1c1c1c1c1","cccccccccccccc2"],
           href:"https://api.fanyi.baidu.com/",
           address:"http://www.zuowen.com/e/20190903/5d6de02877f8f.shtml"
       },
       {

           title:"标题标题啊啵踩顶呃4",
           author:[{
               name:"D1",
               organization:"DO1",
           },{
               name:"D2",
               organization:"DO2",
           }],//字符串数组
           FirstTitle:[{
               f_title:"DF1",
               f_context:"DF111111111111111111111",
           },{
               f_title:"AF2",
               f_context:"DF222222222222222222222",
           }],//字符串数组
           otherTitle:[{
               o_title:"DO1",
               o_context:"DO111111111111111111111",
           },{
               o_title:"DO2",
               o_context:"DO22222222222222222222222",
           }],//字符串数组
           documents: ["1d1d1d1d1d1d1d1d","ddddddddddddddddddddddd2"],
           href:"https://xin.baidu.com/company_detail_28783255028393?rq=es&pd=ee&from=ps",
           address:"http://www.zuowen.com/e/20190903/5d6de02877f8f.shtml"
       },
       {

           title:"标题标题啊啵踩顶呃5",
           author:[{
               name:"E1",
               organization:"EO1",
           },{
               name:"E2",
               organization:"EO2",
           }],//字符串数组
           FirstTitle:[{
               f_title:"EF1",
               f_context:"EF111111111111111111111",
           },{
               f_title:"EF2",
               f_context:"EF222222222222222222222",
           }],//字符串数组
           otherTitle:[{
               o_title:"EO1",
               o_context:"EO111111111111111111111",
           },{
               o_title:"EO2",
               o_context:"EO22222222222222222222222",
           }],//字符串数组
           documents: ["e1e1e1e1e1e1e1e1","eeeeeeeeeeeeeeeeeeeeee2"],
           href:"https://www.baidu.com",
           address:"http://www.zuowen.com/e/20190903/5d6de02877f8f.shtml"
       }
   ];
    var html_Data=[];
    var detail_html=[];
    var PageSize=3;//设置每页示数目
    var currentPage =1;//当前页，默认为1
    var Count;//记录条数
    var PageCount;//计算总页数
    $(function(){
        //遍历数据进行展示
        for(let i=0;i<pageData.length;i++){
            let data='<ul class="list-group"><li class="my-list-group-item"><h3>'+pageData[i].title+'</h3></li>'+
                '<li class="my-list-group-item"><p>'+pageData[i].author[0].name +'<small>——'+pageData[i].author[0].organization+'</small>&nbsp;&nbsp;'+
                pageData[i].author[1].name +'<small>——'+pageData[i].author[1].organization+'</small></p></li>'+
                '<li class="my-list-group-item"><p><strong>'+pageData[i].FirstTitle[0].f_title+'</strong></p><p>'+pageData[i].FirstTitle[0].f_context+
                '</p><p><strong>'+pageData[i].FirstTitle[1].f_title+'</strong></p><p>'+pageData[i].FirstTitle[1].f_context+'</p></li>'+
                '<li class="my-list-group-item"><small>'+"其他标题："+pageData[i].otherTitle[0].o_title+'&nbsp;&nbsp;'+pageData[i].otherTitle[1].o_title+'</small></li>';
            html_Data.push(data);
        };
        Count=html_Data.length;
        PageCount=Math.ceil(Count/PageSize);
        //简单的分页按钮
        for(let i=1;i<=PageCount;i++){
            let pageN='<a style="color: #8b88bb;border: 1px solid #6786c6;font-size: 16px;padding: 10px 10px;" href="#" selectPage="'+i+'">'+i+'</a>&nbsp;&nbsp;';
            $('#page').append(pageN);
        }
        //显示默认页（第一页）
        for(let i=(currentPage-1)*PageSize;i<PageSize*currentPage;i++){
            $('#context').append(html_Data[i]);
        }
        //显示选择页的内容
        $('a').click(function(){
            let selectPage=$(this).attr('selectPage');
            $('#context').html('');
            for(let i=(selectPage-1)*PageSize;i<PageSize*selectPage;i++){
                $('#context').append(html_Data[i]);
            }
        });
    });

    //处理下拉搜索
    function changes(a) {
        $('#detail').text(a)
    }
    //处理根据下拉进行搜索
    document.getElementById('detailSearch_button').onclick=function() {
        //获取输入框内容
        const detail_search=document.getElementById("div2");
        const detail_search_text=detail_search.value;
        //临时数组清空
        detail_html.length=0;
        $('#context').html("");
        //根据条件重新构造临时数组的数据
        if ($('#detail').text()=="论文"){
            for (let i=0;i<pageData.length;i++){
                for (let m=0;m<pageData[i].documents.length;m++){
                    if (pageData[i].documents[m].indexOf(detail_search_text)!=-1){
                        let data='<ul class="list-group"><li class="my-list-group-item"><h3>'+pageData[i].title+'</h3></li>'+
                            '<li class="my-list-group-item"><p>'+pageData[i].author[0].name +'<small>——'+pageData[i].author[0].organization+'</small>&nbsp;&nbsp;'+
                            pageData[i].author[1].name +'<small>——'+pageData[i].author[1].organization+'</small></p></li>'+
                            '<li class="my-list-group-item"><p><strong>'+pageData[i].FirstTitle[0].f_title+'</strong></p><p>'+pageData[i].FirstTitle[0].f_context+
                            '</p><p><strong>'+pageData[i].FirstTitle[1].f_title+'</strong></p><p>'+pageData[i].FirstTitle[1].f_context+'</p></li>'+
                            '<li class="my-list-group-item"><small>'+"其他标题："+pageData[i].otherTitle[0].o_title+'&nbsp;&nbsp;'+pageData[i].otherTitle[1].o_title+'</small></li>'+
                            '<li class="my-list-group-item"><a href="'+pageData[i].href+'">'+pageData[i].address+'</a>—<a><small>'+"百度快照"+'</small></a></li></ul>';
                        detail_html.push(data);
                    }
                }
            }
        }
        if ($('#detail').text()=="词语"){
            for (let i=0;i<pageData.length;i++){
               for(let j=0;j<pageData[i].FirstTitle.length;j++){
                   if (pageData[i].FirstTitle[j].f_context.indexOf(detail_search_text)!=-1 || pageData[i].otherTitle[j].o_context.indexOf(detail_search_text)!=-1){
                       let data='<ul class="list-group"><li class="my-list-group-item"><h3>'+pageData[i].title+'</h3></li>'+
                           '<li class="my-list-group-item"><p>'+pageData[i].author[0].name +'<small>——'+pageData[i].author[0].organization+'</small>&nbsp;&nbsp;'+
                           pageData[i].author[1].name +'<small>——'+pageData[i].author[1].organization+'</small></p></li>'+
                           '<li class="my-list-group-item"><p><strong>'+pageData[i].FirstTitle[0].f_title+'</strong></p><p>'+pageData[i].FirstTitle[0].f_context+
                           '</p><p><strong>'+pageData[i].FirstTitle[1].f_title+'</strong></p><p>'+pageData[i].FirstTitle[1].f_context+'</p></li>'+
                           '<li class="my-list-group-item"><small>'+"其他标题："+pageData[i].otherTitle[0].o_title+'&nbsp;&nbsp;'+pageData[i].otherTitle[1].o_title+'</small></li>'+
                           '<li class="my-list-group-item"><a href="'+pageData[i].href+'">'+pageData[i].address+'</a>—<a><small>'+"百度快照"+'</small></a></li></ul>';
                       detail_html.push(data);
                   }
               }
            }
        }
        if ($('#detail').text()=="作者"){
            for (let i=0;i<pageData.length;i++){
               for(let j=0;j<pageData[i].author.length;j++){
                   if (pageData[i].author[j].name.indexOf(detail_search_text)!=-1){
                       let data='<ul class="list-group"><li class="my-list-group-item"><h3>'+pageData[i].title+'</h3></li>'+
                           '<li class="my-list-group-item"><p>'+pageData[i].author[0].name +'<small>——'+pageData[i].author[0].organization+'</small>&nbsp;&nbsp;'+
                           pageData[i].author[1].name +'<small>——'+pageData[i].author[1].organization+'</small></p></li>'+
                           '<li class="my-list-group-item"><p><strong>'+pageData[i].FirstTitle[0].f_title+'</strong></p><p>'+pageData[i].FirstTitle[0].f_context+
                           '</p><p><strong>'+pageData[i].FirstTitle[1].f_title+'</strong></p><p>'+pageData[i].FirstTitle[1].f_context+'</p></li>'+
                           '<li class="my-list-group-item"><small>'+"其他标题："+pageData[i].otherTitle[0].o_title+'&nbsp;&nbsp;'+pageData[i].otherTitle[1].o_title+'</small></li>'+
                           '<li class="my-list-group-item"><a href="'+pageData[i].href+'">'+pageData[i].address+'</a>—<a><small>'+"百度快照"+'</small></a></li></ul>';
                       detail_html.push(data);
                   }
               }
            }
        }
        //重新计算页数和生成按钮
        Count=detail_html.length;
        PageCount=Math.ceil(Count/PageSize);
        $('#page').html("");
        for(let i=1;i<=PageCount;i++){
            let pageN='<a style="color: #8b88bb;border: 1px solid #6786c6;font-size: 16px;padding: 10px 10px;" href="#" selectPage="'+i+'">'+i+'</a>&nbsp;&nbsp;';
            $('#page').append(pageN);
        }
        //条件搜索后 显示默认页（第一页）
        for(let i=(currentPage-1)*PageSize;i<PageSize*currentPage;i++){
            $('#context').append(detail_html[i]);
        }
        //条件搜索后 显示选择页的内容
        $('a').click(function(){
            let selectPage=$(this).attr('selectPage');
            $('#context').html('');
            for(let i=(selectPage-1)*PageSize;i<PageSize*selectPage;i++){
                $('#context').append(detail_html[i]);
            }
                let findContexts=$('#context').html().split(detail_search_text);
                contexts.innerHTML=findContexts.join('<span style="color: red">'+detail_search_text+'</span>');//高亮显示为红色
        });
        //高亮显示
        if(detail_search_text){
            let findContexts=$("#context").html().split(detail_search_text);
            contexts.innerHTML=findContexts.join('<span style="color: red">'+detail_search_text+'</span>');//高亮显示为红色
        }else{
            window.location.reload();
        }
    }
</script>
</html>